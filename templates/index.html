<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Property Feature Input</title>
    <style>
      html,
        body {
        height: 100%;
        width: 100%;
        margin: 0;
        padding: 50px;
        box-sizing: border-box;
        display: flex;
        align-items: center;
        justify-content: center;
        background: url("https://img.freepik.com/free-photo/illustration-anime-city_23-2151779683.jpg")
          no-repeat center center fixed;
        background-size: cover;
      }

      .social-icons {
        position: absolute;
        top: 120px; /* Moves it below the company logo */
        left: 25px; /* Or adjust for your layout */
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
        z-index: 10;
      }

      .social-icons img {
        width: 80px;
        height: 80px;
        border-radius: 6px;
        transition: transform 0.3s ease;
        cursor: pointer;
      }

      .social-icons img:hover {
        transform: scale(1.15);
        filter: drop-shadow(0 0 6px #000);
      }

      .company-logo {
        position: absolute;
        top: 1%;
        left: 1%;
        width: 100px;
        height: 100px;
        z-index: 20;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        transition: transform 0.3s ease;
      }

      .company-logo:hover {
        transform: scale(1.1) rotate(2deg);
      }

      .company-logo img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      form {
        top: 10%;
        background: rgba(255, 255, 255, 0.9);
        padding: 20px 30px;
        border-radius: 12px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
        max-width: 500px;
        width: 100%;
      }

      .footer {
        margin-top: 20px;
        font-size: 25px;
        color: white;
        text-align: center;
        text-shadow: 1px 1px 3px #000;
      }

      input,
      select {
        width: 100%;
        padding: 10px;
        margin: 10px 0;
        font-size: 16px;
        height: 42px;
        box-sizing: border-box;
      }

      button {
        width: 100%;
        padding: 12px 20px;
        background: #28a745;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
      }

      button:hover {
        background: #218838;
      }

      h2 {
        margin-top: 0;
        font-size: 25px;
        color: #000;
        text-align: center;
      }
      form h2 {
        color: #000;
        background-color: rgba(255, 255, 255, 0.7);
        padding: 10px;
        border-radius: 8px;
      }

      #predictionResult {
        margin-top: 30px;
        padding: 20px;
        font-size: 24px;
        font-weight: bold;
        color: #ffffff;
        background: rgba(0, 0, 0, 0.6);
        border-radius: 12px;
        text-align: center;
        text-shadow: 1px 1px 3px #000;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
        animation: fadeInResult 0.5s ease-in-out;
      }

      #status {
        font-size: 14px;
        color: #555;
        margin-top: -8px;
        margin-bottom: 10px;
      }

      /* ---------- Responsive Styles ---------- */
      @media (max-width: 768px) {
        form {
          background: rgba(255, 255, 255, 0.9);
          padding: 20px 30px;
          top: 10%;
          border-radius: 12px;
          box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
          max-width: 500px;
          width: 100%;
        } 

        .footer {
          margin-top: 20px;
          font-size: 16px;
          color: white;
          text-align: center;
          text-shadow: 1px 1px 3px #000;
        }

        .social-icons {
          position: absolute;
          top: 75px; /* Moves it below the company logo */
          left: 15px; /* Or adjust for your layout */
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 10px;
          z-index: 10;
        }

        .social-icons img {
          width: 46px;
          height: 46px;
          border-radius: 6px;
          transition: transform 0.3s ease;
          cursor: pointer;
        }

        .company-logo {
          top: 2px;
          width: 65px;
          height: 65px;
        }

        .company-logo img {
          width: 100%;
          height: 100%;
        }

        input,
        select {
          width: 100%;
          padding: 10px;
          margin: 10px 0;
          font-size: 16px;
          height: 42px;
          box-sizing: border-box;
        }

        button {
          font-size: 15px;
          height: 40px;
        }

        h2 {
          font-size: 20px;
        }
        form h2 {
        color: #000;
        background-color: rgba(255, 255, 255, 0.7);
        padding: 10px;
        border-radius: 8px;
        }
      }

      @media (max-width: 400px) {
        .footer {
          margin-top: 20px;
          font-size: 16px;
          color: white;
          text-align: center;
          text-shadow: 1px 1px 3px #000;
        }
        .social-icons {
          position: absolute;
          top: 75px; /* Moves it below the company logo */
          left: 15px; /* Or adjust for your layout */
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 10px;
          z-index: 10;
        }

        .social-icons img {
          width: 46px;
          height: 46px;
          border-radius: 6px;
          transition: transform 0.3s ease;
          cursor: pointer;
        }

        .company-logo {
          top: 2px;
          width: 65px;
          height: 65px;
        }

        .company-logo img {
          width: 100%;
          height: 100%;
        }

        form {
          background: rgba(255, 255, 255, 0.9);
          padding: 20px 30px;
          top: 10%;
          border-radius: 12px;
          box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
          max-width: 500px;
          width: 100%;
        } 

        input,
        select {
          width: 100%;
          padding: 10px;
          margin: 10px 0;
          font-size: 10px;
          height: 42px;
          box-sizing: border-box;
        }
        form h2 {
        color: #000;
        background-color: rgba(255, 255, 255, 0.7);
        padding: 10px;
        border-radius: 8px;
        }

        button {
          font-size: 14px;
          height: 38px;
        }
      }

      /* Optional animation (make sure to define it) */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>

  <body>
    <div class="background">
      <div class="company-logo">
        <a href="/company" class="company-logo" title="company Now">
          <img
            src="https://i.postimg.cc/sXnfPsS5/kishan-comp.jpg"
            alt="company Logo"
          />
        </a>
      </div>

      <div class="social-icons">
        <a href="https://www.instagram.com/data_decode_/" target="_blank">
          <img
            src="https://img.icons8.com/?size=80&id=TEYr8ETaIfBJ&format=png"
            alt="Instagram"
          />
        </a>
        <a
          href="https://www.linkedin.com/in/kishan-prajapati-33273a368"
          target="_blank"
        >
          <img
            src="https://img.icons8.com/?size=80&id=kBCrQMzpQDLQ&format=png"
            alt="LinkedIn"
          />
        </a>
        <a href="https://github.com/kishnan-code" target="_blank">
          <img
            src="https://img.icons8.com/?size=64&id=u9R54eMKS8fw&format=png"
            alt="GitHub"
          />
        </a>
        <a href="mailto:Kishanprajpati154@gmail.com" target="_blank">
          <img
            src="https://img.icons8.com/?size=64&id=42800&format=png"
            alt="GitHub"
          />
        </a>
      </div>

      <form id="propertyForm">
        <h2>Enter Property Details to Get a Price Prediction</h2>

        <label for="city">Region</label>
        <select id="city" name="city" required>
          <option value="">Select</option>
          <option value="Mumbai">Mumbai</option>
          <option value="Western Mumbai">Western Mumbai</option>
          <option value="Central Mumbai">Central Mumbai</option>
          <option value="Mumbai South">Mumbai South</option>
        </select>

        <label for="locality">Locality</label>
        <select id="locality" name="locality" required>
          <option value="">Select Locality</option>
        </select>
        <div id="status"></div>

        <label for="property_type">Property Type</label>
        <select id="property_type" name="property_type" required>
          <option value="">Select</option>
          <option value="Apartment">Apartment</option>
          <option value="Villa">Villa</option>
          <option value="Independent House">Independent House</option>
          <option value="Independent Floor">Independent Floor</option>
          <option value="Studio Apartment">Studio Apartment</option>
        </select>

        <label for="bedroom_num">Number of Bedrooms</label>
        <select id="bedroom_num" name="bedroom_num" required></select>

        <label for="bathroom_num">Number of Bathrooms</label>
        <select id="bathroom_num" name="bathroom_num" required></select>

        <label for="balcony_num">Number of Balconies</label>
        <select id="balcony_num" name="balcony_num" required></select>

        <label for="furnished">Furnished</label>
        <select id="furnished" name="furnished" required>
          <option value="">Select</option>
          <option value="Unfurnished">Unfurnished</option>
          <option value="Semi-Furnished">Semi-Furnished</option>
          <option value="Furnished">Furnished</option>
        </select>

        <label for="latitude">Latitude</label>
        <input
          type="number"
          id="latitude"
          name="latitude"
          placeholder="Auto-detecting..."
          step="any"
          required
          readonly
        />

        <label for="longitude">Longitude</label>
        <input
          type="number"
          id="longitude"
          name="longitude"
          placeholder="Auto-detecting..."
          step="any"
          required
          readonly
        />

        <button type="submit">Submit</button>

      </form>
      <div id="predictionResult"></div>
      <div class="footer">
        Designed and Developed by Vishal Jamalpuri & Kishan Prajapati
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        let timeout = null;

        const cityLocalities = {
          "Mumbai":  ['Dahisar', 'Cuffe Parade', 'Parel', 'Juhu', 'Bhiwandi', 'Sector 21 Kamothe', 'Thakurli', 'Majiwada','Sahkar Nagar', 'Byculla', 'Agripada', 'Mazgaon', 'Mankhurd', 'Police Colony', 'Ville Parle', 'Neral', 'Jambrung',
                'Dronagiri', 'Khar', 'Lower Parel', 'Airoli', 'Nere', 'Antop Hill', 'Mumbra', 'Karjat', 'Anjurdive', 'Patil Nagar Vasind', 'Shelu', 'Shivaji Park', 'Sector 22 Kamothe', 'Nallasopara W', 'Kasaradavali Thane', 'Arya Nagar',
                'Kharodi','Chinchpokli', 'Ambernath', 'Ambivali', 'Sector 19 Ulwe', 'Shivkar', 'Jacob Circle', 'Shilphata', 'Sector-12 Kamothe', 'Colaba', 'Vevoor', 'Kanjurmarg', 'Madh', 'Pisarve', 'Khopoli',
                'Nahur', 'Naigaon', 'Taloja', 'Gamdevi', 'Murbad', 'Sector-50 Seawoods', 'Ashok Nagar', 'Tardeo', 'Koper Khairane', 'Agasan Village', 'Govandi', 'Ambivli', 'Dombivli', 'Boisar', 'Titwala', 'Sanpada','Diva',
                'Shil Phata','Taloje','Greater Khanda', 'Bandra', 'Andheri', 'Wadala','Sector-20 Koparkhairane', 'Jogeshwari', 'Badlapur', 'Juinagar', 'Tilak Nagar', 'Naupada', 'Kamothe','Karanjade', 'Vile Parle', 'Rasayani', 'Kolshet', 'Muthaval', 'Chinchodyacha Pada',
                'Bhayandar', 'Asangaon', 'Vichumbe', 'Kharghar','Ibhadpada', 'Nerul','Sector 16 A','Goregaon','Sector 11 Koparkhairane', 'Kalyan', 'Powai','Sewri', 'Seawoods', 'Saki Naka', 'Marine Lines',
                'Malad', 'Sector 17 Ulwe', 'Kalamboli', 'Bandra Kurla Complex','Usarghar','Mahim', 'Prabhadevi', 'Fort', 'Anushakti Nagar', 'Vikhroli', 'Ghatkopar', 'Dadar', 'Deonar','Sector 19 Kharghar','Girgaon','Rabale',
                'Kurla', 'Nilje Gaon','Ghansoli', 'Mahalaxmi', 'Shahapur','Matunga', 'Ulwe', 'Navghar','Thane','Vangani','Dombivali','Mazagaon','Malabar Hill','Worli','Sion','Nala Sopara','Palidevad','Vikroli','Palghar','Santacruz','Chembur','Makane Kapase',
                'Kandivali','Bhandup','Saphale','Hiranandani Estates','Nalasopara','Vashi','Cumballa Hill','Mira Road','Mumbai Central','Kalwa','Panvel','Amboli','Sector-9 Ulwe','Belapur','Chedda Nagar','Vasai','Bopele','Sai Samarth Mitra','Mulund','Virar'],

          "Western Mumbai": ['Dahisar', 'Cuffe Parade', 'Parel', 'Juhu', 'Bhiwandi', 'Sector 21 Kamothe', 'Thakurli', 'Majiwada','Sahkar Nagar', 'Byculla', 'Agripada', 'Mazgaon', 'Mankhurd', 'Police Colony', 'Ville Parle', 'Neral', 'Jambrung',
                'Dronagiri', 'Khar', 'Lower Parel', 'Airoli', 'Nere', 'Antop Hill', 'Mumbra', 'Karjat', 'Anjurdive', 'Patil Nagar Vasind', 'Shelu', 'Shivaji Park', 'Sector 22 Kamothe', 'Nallasopara W', 'Kasaradavali Thane', 'Arya Nagar',
                'Kharodi','Chinchpokli', 'Ambernath', 'Ambivali', 'Sector 19 Ulwe', 'Shivkar', 'Jacob Circle', 'Shilphata', 'Sector-12 Kamothe', 'Colaba', 'Vevoor', 'Kanjurmarg', 'Madh', 'Pisarve', 'Khopoli',
                'Nahur', 'Naigaon', 'Taloja', 'Gamdevi', 'Murbad', 'Sector-50 Seawoods', 'Ashok Nagar', 'Tardeo', 'Koper Khairane', 'Agasan Village', 'Govandi', 'Ambivli', 'Dombivli', 'Boisar', 'Titwala', 'Sanpada','Diva',
                'Shil Phata','Taloje','Greater Khanda', 'Bandra', 'Andheri', 'Wadala','Sector-20 Koparkhairane', 'Jogeshwari', 'Badlapur', 'Juinagar', 'Tilak Nagar', 'Naupada', 'Kamothe','Karanjade', 'Vile Parle', 'Rasayani', 'Kolshet', 'Muthaval', 'Chinchodyacha Pada',
                'Bhayandar', 'Asangaon', 'Vichumbe', 'Kharghar','Ibhadpada', 'Nerul','Sector 16 A','Goregaon','Sector 11 Koparkhairane', 'Kalyan', 'Powai','Sewri', 'Seawoods', 'Saki Naka', 'Marine Lines',
                'Malad', 'Sector 17 Ulwe', 'Kalamboli', 'Bandra Kurla Complex','Usarghar','Mahim', 'Prabhadevi', 'Fort', 'Anushakti Nagar', 'Vikhroli', 'Ghatkopar', 'Dadar', 'Deonar','Sector 19 Kharghar','Girgaon','Rabale',
                'Kurla', 'Nilje Gaon','Ghansoli', 'Mahalaxmi', 'Shahapur','Matunga', 'Ulwe', 'Navghar','Thane','Vangani','Dombivali','Mazagaon','Malabar Hill','Worli','Sion','Nala Sopara','Palidevad','Vikroli','Palghar','Santacruz','Chembur','Makane Kapase',
                'Kandivali','Bhandup','Saphale','Hiranandani Estates','Nalasopara','Vashi','Cumballa Hill','Mira Road','Mumbai Central','Kalwa','Panvel','Amboli','Sector-9 Ulwe','Belapur','Chedda Nagar','Vasai','Bopele','Sai Samarth Mitra','Mulund','Virar'],

          "Central Mumbai":['Dahisar', 'Cuffe Parade', 'Parel', 'Juhu', 'Bhiwandi', 'Sector 21 Kamothe', 'Thakurli', 'Majiwada','Sahkar Nagar', 'Byculla', 'Agripada', 'Mazgaon', 'Mankhurd', 'Police Colony', 'Ville Parle', 'Neral', 'Jambrung',
                'Dronagiri', 'Khar', 'Lower Parel', 'Airoli', 'Nere', 'Antop Hill', 'Mumbra', 'Karjat', 'Anjurdive', 'Patil Nagar Vasind', 'Shelu', 'Shivaji Park', 'Sector 22 Kamothe', 'Nallasopara W', 'Kasaradavali Thane', 'Arya Nagar',
                'Kharodi','Chinchpokli', 'Ambernath', 'Ambivali', 'Sector 19 Ulwe', 'Shivkar', 'Jacob Circle', 'Shilphata', 'Sector-12 Kamothe', 'Colaba', 'Vevoor', 'Kanjurmarg', 'Madh', 'Pisarve', 'Khopoli',
                'Nahur', 'Naigaon', 'Taloja', 'Gamdevi', 'Murbad', 'Sector-50 Seawoods', 'Ashok Nagar', 'Tardeo', 'Koper Khairane', 'Agasan Village', 'Govandi', 'Ambivli', 'Dombivli', 'Boisar', 'Titwala', 'Sanpada','Diva',
                'Shil Phata','Taloje','Greater Khanda', 'Bandra', 'Andheri', 'Wadala','Sector-20 Koparkhairane', 'Jogeshwari', 'Badlapur', 'Juinagar', 'Tilak Nagar', 'Naupada', 'Kamothe','Karanjade', 'Vile Parle', 'Rasayani', 'Kolshet', 'Muthaval', 'Chinchodyacha Pada',
                'Bhayandar', 'Asangaon', 'Vichumbe', 'Kharghar','Ibhadpada', 'Nerul','Sector 16 A','Goregaon','Sector 11 Koparkhairane', 'Kalyan', 'Powai','Sewri', 'Seawoods', 'Saki Naka', 'Marine Lines',
                'Malad', 'Sector 17 Ulwe', 'Kalamboli', 'Bandra Kurla Complex','Usarghar','Mahim', 'Prabhadevi', 'Fort', 'Anushakti Nagar', 'Vikhroli', 'Ghatkopar', 'Dadar', 'Deonar','Sector 19 Kharghar','Girgaon','Rabale',
                'Kurla', 'Nilje Gaon','Ghansoli', 'Mahalaxmi', 'Shahapur','Matunga', 'Ulwe', 'Navghar','Thane','Vangani','Dombivali','Mazagaon','Malabar Hill','Worli','Sion','Nala Sopara','Palidevad','Vikroli','Palghar','Santacruz','Chembur','Makane Kapase',
                'Kandivali','Bhandup','Saphale','Hiranandani Estates','Nalasopara','Vashi','Cumballa Hill','Mira Road','Mumbai Central','Kalwa','Panvel','Amboli','Sector-9 Ulwe','Belapur','Chedda Nagar','Vasai','Bopele','Sai Samarth Mitra','Mulund','Virar'],

          "Mumbai South":['Dahisar', 'Cuffe Parade', 'Parel', 'Juhu', 'Bhiwandi', 'Sector 21 Kamothe', 'Thakurli', 'Majiwada','Sahkar Nagar', 'Byculla', 'Agripada', 'Mazgaon', 'Mankhurd', 'Police Colony', 'Ville Parle', 'Neral', 'Jambrung',
                'Dronagiri', 'Khar', 'Lower Parel', 'Airoli', 'Nere', 'Antop Hill', 'Mumbra', 'Karjat', 'Anjurdive', 'Patil Nagar Vasind', 'Shelu', 'Shivaji Park', 'Sector 22 Kamothe', 'Nallasopara W', 'Kasaradavali Thane', 'Arya Nagar',
                'Kharodi','Chinchpokli', 'Ambernath', 'Ambivali', 'Sector 19 Ulwe', 'Shivkar', 'Jacob Circle', 'Shilphata', 'Sector-12 Kamothe', 'Colaba', 'Vevoor', 'Kanjurmarg', 'Madh', 'Pisarve', 'Khopoli',
                'Nahur', 'Naigaon', 'Taloja', 'Gamdevi', 'Murbad', 'Sector-50 Seawoods', 'Ashok Nagar', 'Tardeo', 'Koper Khairane', 'Agasan Village', 'Govandi', 'Ambivli', 'Dombivli', 'Boisar', 'Titwala', 'Sanpada','Diva',
                'Shil Phata','Taloje','Greater Khanda', 'Bandra', 'Andheri', 'Wadala','Sector-20 Koparkhairane', 'Jogeshwari', 'Badlapur', 'Juinagar', 'Tilak Nagar', 'Naupada', 'Kamothe','Karanjade', 'Vile Parle', 'Rasayani', 'Kolshet', 'Muthaval', 'Chinchodyacha Pada',
                'Bhayandar', 'Asangaon', 'Vichumbe', 'Kharghar','Ibhadpada', 'Nerul','Sector 16 A','Goregaon','Sector 11 Koparkhairane', 'Kalyan', 'Powai','Sewri', 'Seawoods', 'Saki Naka', 'Marine Lines',
                'Malad', 'Sector 17 Ulwe', 'Kalamboli', 'Bandra Kurla Complex','Usarghar','Mahim', 'Prabhadevi', 'Fort', 'Anushakti Nagar', 'Vikhroli', 'Ghatkopar', 'Dadar', 'Deonar','Sector 19 Kharghar','Girgaon','Rabale',
                'Kurla', 'Nilje Gaon','Ghansoli', 'Mahalaxmi', 'Shahapur','Matunga', 'Ulwe', 'Navghar','Thane','Vangani','Dombivali','Mazagaon','Malabar Hill','Worli','Sion','Nala Sopara','Palidevad','Vikroli','Palghar','Santacruz','Chembur','Makane Kapase',
                'Kandivali','Bhandup','Saphale','Hiranandani Estates','Nalasopara','Vashi','Cumballa Hill','Mira Road','Mumbai Central','Kalwa','Panvel','Amboli','Sector-9 Ulwe','Belapur','Chedda Nagar','Vasai','Bopele','Sai Samarth Mitra','Mulund','Virar']
    }
        function updateLocalityOptions(city) {
          const localitySelect = document.getElementById("locality");
          localitySelect.innerHTML =
            '<option value="">Select Locality</option>';
          if (cityLocalities[city]) {
            cityLocalities[city].forEach((locality) => {
              const option = document.createElement("option");
              option.value = locality;
              option.text = locality;
              localitySelect.appendChild(option);
            });
          }
        }

        function fetchCoordinates() {
          const locality = document.getElementById("locality").value.trim();
          const city = "Mumbai";

          if (!locality) {
            document.getElementById("latitude").value = "";
            document.getElementById("longitude").value = "";
            document.getElementById("status").innerText = "";
            return;
          }

          const query = encodeURIComponent(`${locality}, ${city}`);
          fetch(
            `https://nominatim.openstreetmap.org/search?q=${query}&format=json`
          )
            .then((response) => response.json())
            .then((data) => {
              if (data.length > 0) {
                document.getElementById("latitude").value = data[0].lat;
                document.getElementById("longitude").value = data[0].lon;
                document.getElementById("status").innerText =
                  "Coordinates auto-filled.";
              } else {
                document.getElementById("latitude").value = "";
                document.getElementById("longitude").value = "";
                document.getElementById("status").innerText =
                  "No matching location found.";
              }
            })
            .catch((error) => {
              console.error(error);
              document.getElementById("status").innerText =
                "Error fetching location.";
            });
        }

        document
          .getElementById("city")
          .addEventListener("change", function () {
            const selectedCity = this.value;
            updateLocalityOptions(selectedCity);
            clearTimeout(timeout);
            timeout = setTimeout(fetchCoordinates, 500);
          });

        document.getElementById("locality").addEventListener("change", () => {
          clearTimeout(timeout);
          timeout = setTimeout(fetchCoordinates, 500);
        });

        function populateSelect(id) {
          const select = document.getElementById(id);
          select.innerHTML = '<option value="">Select</option>';
          for (let i = 0; i <= 15; i++) {
            const option = document.createElement("option");
            option.value = i;
            option.text = i;
            select.appendChild(option);
          }
        }

        populateSelect("bedroom_num");
        populateSelect("bathroom_num");
        populateSelect("balcony_num");

        [
          "city",
          "locality",
          "property_type",
          "bedroom_num",
          "bathroom_num",
          "balcony_num",
          "furnished",
          "latitude",
          "longitude",
        ].forEach((id) => {
          const input = document.getElementById(id);
          input.addEventListener("invalid", () => {
            if (!input.value)
              input.setCustomValidity("This field is required.");
          });
          input.addEventListener("input", () => {
            input.setCustomValidity("");
          });
        });

        if ("geolocation" in navigator) {
          navigator.geolocation.getCurrentPosition(
            (position) => {
              document.getElementById("latitude").value =
                position.coords.latitude.toFixed(6);
              document.getElementById("longitude").value =
                position.coords.longitude.toFixed(6);
            },
            (error) => {
              console.warn("Geolocation error:", error.message);
              document.getElementById("latitude").placeholder =
                "Location not available";
              document.getElementById("longitude").placeholder =
                "Location not available";
            }
          );
        } else {
          document.getElementById("latitude").placeholder =
            "Geolocation not supported";
          document.getElementById("longitude").placeholder =
            "Geolocation not supported";
        }

        document
          .getElementById("propertyForm")
          .addEventListener("submit", async function (e) {
            e.preventDefault();
            const form = e.target;
            const button = form.querySelector("button");
            const resultDiv = document.getElementById("predictionResult");

            if (!form.checkValidity()) {
              form.reportValidity();
              return;
            }

            const formData = new FormData(form);
            const data = {};
            formData.forEach((value, key) => (data[key] = value));

            button.disabled = true;
            button.textContent = "Predicting...";
            resultDiv.textContent = "";

            try {
              const response = await fetch("http://localhost:5000/predict", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data),
              });

              const result = await response.json();
              if (result.prediction !== undefined) {
                resultDiv.innerHTML = `<strong>Predicted Price:</strong><br>₹${result.prediction}<br><em>(${result.prediction_in_words})</em>`;
              } else {
                resultDiv.textContent =
                  "Error: " + (result.error || "Unknown error.");
              }
            } catch (error) {
              console.error("Prediction error:", error);
              resultDiv.textContent = "Prediction failed. Check console.";
            }

            button.disabled = false;
            button.textContent = "Submit";
          });
      });
    </script>
  </body>
</html>
